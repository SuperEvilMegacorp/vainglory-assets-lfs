{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "JSON API Schema",
  "description": "Este es un esquema para respuestas en el formato JSON API. Para mas, visita http://jsonapi.org",   
  "oneOf": [
    {
      "$ref": "#/definitions/success"
    },
    {
      "$ref": "#/definitions/failure"
    },
    {
      "$ref": "#/definitions/info"
    }
  ],
  "definitions": {
    "success": {
      "type": "object",
      "required": [
        "data"
      ],
      "properties": {
        "data": {
          "$ref": "#/definitions/data"
        },
        "included": {
          "description": "Para reducir el número de peticiones HTTP, lo servidores **PUEDEN** permitir respuestas que incluyen recursos relacionados junto con los recursos primarios solicitados. Tales respuestas se llaman  \"compound documents\".",
          "type": "array",
          "items": {
            "$ref": "#/definitions/resource"
          },
          "uniqueItems": true
        },
        "meta": {
          "$ref": "#/definitions/meta"
        },
        "links": {
          "description": "Miembros de enlace relacionados a la información primaria.",
          "allOf": [
            {
              "$ref": "#/definitions/links"
            },
            {
              "$ref": "#/definitions/pagination"
            }
          ]
        },
        "jsonapi": {
          "$ref": "#/definitions/jsonapi"
        }
      },
      "additionalProperties": false
    },
    "failure": {
      "type": "object",
      "required": [
        "errors"
      ],
      "properties": {
        "errors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/error"
          },
          "uniqueItems": true
        },
        "meta": {
          "$ref": "#/definitions/meta"
        },
        "jsonapi": {
          "$ref": "#/definitions/jsonapi"
        }
      },
      "additionalProperties": false
    },
    "info": {
      "type": "object",
      "required": [
        "meta"
      ],
      "properties": {
        "meta": {
          "$ref": "#/definitions/meta"
        },
        "links": {
          "$ref": "#/definitions/links"
        },
        "jsonapi": {
          "$ref": "#/definitions/jsonapi"
        }
      },
      "additionalProperties": false
    },
    "meta": {
      "description": "Información Meta- No estándar que no puede ser representada como un atributo o como una relación.",      
      "type": "object",
      "additionalProperties": true
    },
    "data": {
      "description": "Los documentos \"primary data\"  es una representación del recurso o colección de recursos objetivos de una solicitud.",
      "oneOf": [
        {
          "$ref": "#/definitions/resource"
        },
        {
          "description": "Una colección de objetos de recurso, una colección de objetos identificadores de recursos. O una colección vacía ([]), para peticiones que enfocan colecciones de recursos.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/resource"
          },
          "uniqueItems": true
        },
        {
          "description": "Null si la petición es una que puede corresponder a un solo recurso, pero actualmente no lo hace.",
          "type": "null"
        }
      ]
    },
    "resource": {
      "description": "\"Resource objects\"  aparecen en un documento API JSON para representar recursos.",
      "type": "object",
      "required": [
        "type",
        "id"
      ],
      "properties": {
        "type": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "attributes": {
          "anyOf": [
            { "$ref": "#/definitions/matchAttributes" },
            { "$ref": "#/definitions/rosterAttributes" },
            { "$ref": "#/definitions/participantAttributes" },
            { "$ref": "#/definitions/playerAttributes" },
            { "$ref": "#/definitions/telemetryAttributes"}
          ]
        },
        "relationships": {
          "$ref": "#/definitions/relationships"
        },
        "links": {
          "$ref": "#/definitions/links"
        },
        "meta": {
          "$ref": "#/definitions/meta"
        }
      },
      "additionalProperties": false
    },
    "links": {
      "description": "Un recurso de objeto**PUEDE** contener referencias a otros recurso de objetos(\"relationships\"). Las relaciones pueden ser a-uno o a-muchos. Las relaciones pueden ser especificadas incluyendo un miembro en un objeto de enlace de recurso.",
      "type": "object",
      "properties": {
        "self": {
          "description": "Un mismo miembro, cuyo valor es una URL para la relación en sí mismo( un \"relationship URL\"). Esta URL permite al cliente manipular directamente la relación, Por ejemplo, le permitirá al cliente remover un ‘autor’ de un ‘artículo’ sin eliminar el recurso de la persona.",
          "type": "string",
          "format": "uri"
        },
        "related": {
          "$ref": "#/definitions/link"
        }
      },
      "additionalProperties": true
    },
    "link": {
      "description": "Un enlace **DEBE** ser representado tanto como: una cadena  conteniendo el enlace de la URL o un enlace de objeto.",
      "oneOf": [
        {
          "description": "A string containing the link's URL.",
          "type": "string",
          "format": "uri"
        },
        {
          "type": "object",
          "required": [
            "href"
          ],
          "properties": {
            "href": {
              "description": "Una cadena  contiene el enlace de la URL.",
              "type": "string",
              "format": "uri"
            },
            "meta": {
              "$ref": "#/definitions/meta"
            }
          }
        }
      ]
    },
    "matchAttributes": {
        "properties": {
          "createdAt":  { "type": "string" },
          "duration":  { "type": "number" },
          "gameMode":  { "type": "string" },
          "patchVersion": { "type": "string" },
          "shardId": { "type": "string" },
          "stats": {
            "properties": {
              "endGameReason": { "type": "string" },
              "queue": { "type": "string" }
            },
            "required": ["endGameReason", "queue"]
          },
          "titleId": { "type": "string" }
        },
        "additionalProperties": false,
        "required": ["createdAt", "duration", "gameMode",
        "patchVersion", "shardId", "stats", "titleId"]
    },
    "participantAttributes": {
        "properties": {
          "actor": {"type": "string"},
          "stats": {
            "properties":{
              "assists": {"type": "number"},
              "crystalMineCaptures": {"type": "number"},
              "deaths": {"type": "number"},
              "farm": {"type": "number"},
              "firstAfkTime": {"type": "number"},
              "goldMineCaptures": {"type": "number"},
              "itemGrants": {"type": "object"},
              "itemSells": {"type": "object"},
              "itemUses": {"type": "object"},
              "items": {"type": "array"},
              "jungleKills": {"type": "number"},
              "karmaLevel": {"type": "number"},
              "kills": {"type": "number"},
              "krakenCaptures": {"type": "number"},
              "level": {"type": "number"},
              "minionKills": {"type": "number"},
              "nonJungleMinionKills": {"type": "number"},
              "skillTier": {"type": "number"},
              "skinKey": {"type": "string"},
              "turretCaptures": {"type": "number"},
              "wentAfk": {"type": "boolean"},
              "winner": {"type": "boolean"}
            },
            "required": ["assists", "crystalMineCaptures", "deaths", "farm",
            "firstAfkTime", "goldMineCaptures","itemGrants", "itemSells", "itemUses",
          "items", "jungleKills", "karmaLevel", "kills", "krakenCaptures", "level",
        "minionKills", "nonJungleMinionKills", "skillTier", "turretCaptures", "wentAfk", "winner"]
          }
        },
        "additionalProperties": false,
        "required": ["actor", "stats"]
      },
    "playerAttributes": {
      "properties": {
        "name": {"type": "string"},
        "shardId": {"type": "string"},
        "stats": {
          "properties":{
            "level": {"type": "number"},
            "lifetimeGold": {"type": "number"},
            "lossStreak": {"type": "number"},
            "played": {"type": "number"},
            "played_ranked": {"type": "number"},
            "winStreak": {"type": "number"},
            "wins": {"type": "number"},
            "xp": {"type": "number"}
          },
          "required": ["level", "lifetimeGold", "lossStreak", "played",
            "played_ranked", "winStreak", "wins", "xp"]
        },
        "titleId": {"type": "string"}
      },
      "additionalProperties": false,
      "required": ["name", "shardId", "stats", "titleId"]
    },
    "rosterAttributes": {
      "properties": {
        "stats": {
          "properties": {
            "acesEarned": {"type": "number"},
            "gold": {"type": "number"},
            "heroKills": {"type": "number"},
            "krakenCaptures": {"type": "number"},
            "side": {"type": "string"},
            "turretKills": {"type": "number"},
            "turretsRemaining": {"type": "number"}
          },
            "required": ["acesEarned", "gold", "heroKills",
              "krakenCaptures", "side", "turretKills", "turretsRemaining"]
        }
      },
      "additionalProperties": false,
      "required": ["stats"]
    },
    "telemetryAttributes": {
      "properties": {
        "URL":{"type": "string"},
        "contentType":{"type": "string"},
        "createdAt":{"type": "string"},
        "description":{"type": "string"},
        "filename":{"type": "string"},
        "name":{"type": "string"}
      },
      "additionalProperties": false,
      "required": ["URL", "contentType", "createdAt", "description", "filename", "name"]
    },
    "relationships": {
      "description": "Miembros de una relación de objetos (\"relationships\") representan referencias de un recurso del objeto de recurso en el que es definido a otros recursos de objetos.",
      "type": "object",
      "patternProperties": {
        "^\\w[-\\w_]*$": {
          "properties": {
            "links": {
              "$ref": "#/definitions/links"
            },
            "data": {
              "description": "Miembro, cuyo valor representa   \"resource linkage\".",
              "oneOf": [
                {
                  "$ref": "#/definitions/relationshipToOne"
                },
                {
                  "$ref": "#/definitions/relationshipToMany"
                }
              ]
            },
            "meta": {
              "$ref": "#/definitions/meta"
            }
          },
          "anyOf": [
            {"required": ["data"]},
            {"required": ["meta"]},
            {"required": ["links"]}
          ],
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "relationshipToOne": {
      "description": "Referencias a otro objeto de recurso en un- a uno (\"relationship\"). Las referencias pueden ser especificadas incluyendo un miembro en un enlace de objeto de recurso.",
      "anyOf": [
        {
          "$ref": "#/definitions/empty"
        },
        {
          "$ref": "#/definitions/linkage"
        }
      ]
    },
    "relationshipToMany": {
      "description": "Una colección de objetos cada una conteniendo miembros  \"type\" y \"id\" para a-muchas relaciones.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/linkage"
      },
      "uniqueItems": true
    },
    "empty": {
      "description": "Describe una relación a-uno vacía.",
      "type": "null"
    },
    "linkage": {
      "description": "El \"type\" y   \"id\"  a miembros no-vacíos.",
      "type": "object",
      "required": [
        "type",
        "id"
      ],
      "properties": {
        "type": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "meta": {
          "$ref": "#/definitions/meta"
        }
      },
      "additionalProperties": false
    },
    "pagination": {
      "type": "object",
      "properties": {
        "first": {
          "description": "La primera página de información",
          "oneOf": [
            { "type": "string", "format": "uri" },
            { "type": "null" }
          ]
        },
        "last": {
          "description": "La última página de información",
          "oneOf": [
            { "type": "string", "format": "uri" },
            { "type": "null" }
          ]
        },
        "prev": {
          "description": "La anterior página de información",
          "oneOf": [
            { "type": "string", "format": "uri" },
            { "type": "null" }
          ]
        },
        "next": {
          "description": "La siguiente página de información",
          "oneOf": [
            { "type": "string", "format": "uri" },
            { "type": "null" }
          ]
        }
      }
    },
    "jsonapi": {
      "description": "Un objeto describiendo la implementación del servidor.",
      "type": "object",
      "properties": {
        "version": {
          "type": "string"
        },
        "meta": {
          "$ref": "#/definitions/meta"
        }
      },
      "additionalProperties": false
    },
    "error": {
      "type": "object",
      "properties": {
        "id": {
          "description": "Un identificador único para esta ocurrencia particular del problema",
          "type": "string"
        },
        "links": {
          "$ref": "#/definitions/links"
        },
        "status": {
          "description": "El estado del código HTTP aplicable a este problema, expresado como un valor de cadena.",
          "type": "string"
        },
        "code": {
          "description": "Un código de error de aplicación-específico, expresado como un valor de cadena.",
          "type": "string"
        },
        "title": {
          "description": "Un corto resumen-legible por humanos del problema. *NO DEBE* cambiar de ocurrencia a ocurrencia del problema, excepto para propósitos de localización.",
          "type": "string"
        },
        "detail": {
          "description": "Una explicación legible-por humanos específica a esta ocurrencia del problema.",
          "type": "string"
        },
        "source": {
          "type": "object",
          "properties": {
            "pointer": {
              "description": "Un Pointer JSON [RFC6901] a la entidad asociada en el documento solicitado [e.g. \"/data\" for a primary data object, or \"/data/attributes/title\" for a specific attribute].",
              "type": "string"
            },
            "parameter": {
              "description": "Una cadena indicando que parámetro de consulta causó el error.",
              "type": "string"
            }
          }
        },
        "meta": {
          "$ref": "#/definitions/meta"
        }
      },
      "additionalProperties": false
    }
  }
}
